# Инструкция по развертыванию сайта "III Самаркандская весенняя школа молодых психиатров и наркологов"

## Содержимое архива
Архив `samarqand-school-site.zip` содержит готовый к развертыванию веб-сайт для мероприятия "III Самаркандская весенняя школа молодых психиатров и наркологов" (8-12 апреля 2026 года).

## Требования для развертывания
- Node.js 18+ 
- npm или pnpm
- Веб-сервер для статики (если используется production сборка)

## Шаги по развертыванию

### Вариант 1: Разработка (Development)
1. Распакуйте архив
2. Установите зависимости:
   ```bash
   npm install
   # или
   pnpm install
   ```
3. Запустите dev-сервер:
   ```bash
   npm run dev
   # или
   pnpm dev
   ```
4. Сайт будет доступен по адресу: `http://localhost:5173`

### Вариант 2: Продакшн (Production)
1. Распакуйте архив
2. Установите зависимости:
   ```bash
   npm install
   ```
3. Соберите проект:
   ```bash
   npm run build
   ```
4. Файлы для развертывания будут в папке `dist/`
5. Разместите содержимое папки `dist/` на вашем веб-сервере

## Конфигурация

### Переменные окружения
Для локальной разработки (если API не на том же домене), можно указать базовый URL:
```
VITE_API_BASE_URL=https://your-cloudflare-domain
```

### Cloudflare Pages + D1 + R2
Для работы форм регистрации и новостей используйте Cloudflare Pages Functions, D1 и R2:
1. Создайте базу D1 и выполните SQL из `code/samarqand-school/cloudflare_schema.sql`
2. Создайте R2 bucket для загрузки подтверждений членства
3. В Cloudflare Pages добавьте bindings:
   - D1: `DB`
   - R2: `REGISTRATION_FILES`
4. Добавьте переменные окружения для email и доступа:
   - `MAIL_FROM` (например, `noreply@your-domain`)
   - `MAIL_FROM_NAME` (опционально)
   - `MAIL_REPLY_TO` (опционально)
   - `SCHOOL_EMAIL` (копия всех авто-писем)
   - `DEVELOPER_EMAILS` (через запятую, для доступа в `/developer`)
   - Отправка писем реализована через MailChannels (бесплатно для Cloudflare Workers).
5. Для кабинета разработчика настройте Cloudflare Access и ограничьте доступ к `/developer` и `/api/dev/*`.

## Структура проекта
```
samarqand-school/
├── src/
│   ├── pages/           # Страницы сайта
│   │   ├── Home.tsx     # Главная страница
│   │   ├── About.tsx    # О школе
│   │   ├── Program.tsx  # Программа
│   │   ├── Registration.tsx # Регистрация
│   │   ├── Abstracts.tsx # Тезисы
│   │   ├── Venue.tsx    # Место проведения
│   │   ├── Contacts.tsx # Контакты
│   │   └── News.tsx     # Новости
│   ├── components/      # Компоненты
│   ├── lib/            # Утилиты (i18n, backend)
│   └── ...
├── public/             # Статические файлы
│   └── images/        # Изображения и логотипы
├── package.json       # Зависимости и скрипты
└── ...
```

## Многоязычность
Сайт поддерживает 3 языка:
- Русский (по умолчанию)
- Узбекский
- Английский

Переключение языка доступно в хедере сайта.

## Важная информация на сайте

### Ключевые даты
- **Даты мероприятия**: 8-12 апреля 2026
- **Дедлайн тезисов**: 1 марта 2026
- **Дедлайн регистрации**: 5 марта 2026

### Требования к участникам
- Возраст до 40 лет
- Опыт работы не менее 1 года
- Оплаченные членские взносы за 2020-2026 годы
- Знание английского приветствуется

### Контакты
- Email: uzpa.org@gmail.com
- Telegram: @RoseUserbayeva, @inarakhayredinova, @vosikov

### Место проведения
- **Торжественное открытие**: Большой зал СамГМУ, ул. Анкабай, 6
- **Секционные заседания**: ул. Амира Темура, 18

## Обновление контента

### Текстовое содержимое
Основные тексты находятся в файле `src/lib/i18n.tsx` в разделах:
- `translations.ru` - русская версия
- `translations.uz` - узбекская версия  
- `translations.en` - английская версия

### Изображения
Логотипы и изображения находятся в папке `public/images/`:
- `Лого анг.png` - логотип на английском
- `Лого рус.png` - логотип на русском
- `Лого узб.png` - логотип на узбекском
- `hero-bg.jpg` - фон главной страницы
- `samarkand.jpg` - изображение Самарканда
- `venue.jpg` - изображение университета

## Скрипты package.json
- `npm run dev` - запуск dev-сервера
- `npm run build` - сборка для production
- `npm run preview` - предпросмотр production сборки
- `npm run lint` - проверка кода

## Решение проблем

### Ошибки при сборке
1. Убедитесь, что установлена правильная версия Node.js (18+)
2. Удалите папку `node_modules` и `package-lock.json`, затем выполните `npm install`

### Не работают формы
1. Проверьте, что Pages Functions включены и доступны по `/api/*`
2. Убедитесь, что D1 таблицы созданы (см. `code/samarqand-school/cloudflare_schema.sql`)
3. Проверьте binding R2 bucket `REGISTRATION_FILES`
4. Проверьте переменные `MAIL_FROM` и `SCHOOL_EMAIL` для авто-писем

### Проблемы со стилями
Проект использует Tailwind CSS. Убедитесь, что сборка прошла успешно.

## Лицензия
Проект создан для III Самаркандской весенней школы молодых психиатров и наркологов.

## Контакты для поддержки
По вопросам развертывания и технической поддержки обращайтесь к разработчикам сайта.
